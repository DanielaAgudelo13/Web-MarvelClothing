{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,6DAMA,MAAMC,EAAcC,SAASC,cAAc,aACrCC,EAAeF,SAASG,eAAe,SAC7C,IAAIC,EAAO,GAEX,SAASC,EAASC,GACd,IAAIC,EAAQ,EACZR,EAAYS,UAAY,GACxBF,EAAKG,SAASC,KAwBlB,SAAuBA,GACnB,MAAMC,EAAcX,SAASY,cAAc,OAC3CD,EAAYE,UAAY,gBACxBF,EAAYH,UAAY,+FAkBqBE,EAAAI,OAAA,wDACNJ,EAAAK,oKAO3CL,EAAAM,sRAOYC,YAAGN,GAKXA,EAAAO,iBAAA,SAASC,IACV,WAAAA,EAAAC,OAAAC,oCA1DHC,eAA6BC,GACzB,MAAMC,EAAUpB,EAAKqB,QAAQf,GAAYA,EAAQgB,KAAOH,IAExDnB,EAAOoB,EAEHG,kBACMC,EAAAC,mBAAmBhC,EAAAiC,GAAIH,WAAWI,IAAKP,GAGjDQ,EAAAC,iBAAiBT,GAEjBzB,EAAYS,UAAY,GAExBH,EAASmB,cApBLU,CAAcxB,GACdH,GAAS4B,SAASzB,EAAQM,UAG9Bd,EAAakC,UAAYJ,EAAAK,eAAe9B","sources":["js/renderCart.js"],"sourcesContent":["import { auth, db } from \"./app\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { getFirebaseCart, createFirebaseCart } from \"./cart\";\r\nimport { addProductToCart } from \"./utils\";\r\nimport { getMyLocalCart, currencyFormat } from \"./utils\";\r\n\r\nconst cartSection = document.querySelector(\".cartList\");\r\nconst totalSection = document.getElementById(\"total\");\r\nlet cart = [];\r\n\r\nfunction loadCart(cart) {\r\n    let total = 0;\r\n    cartSection.innerHTML = \"\";\r\n    cart.forEach((product) => {\r\n        renderProduct(product);\r\n        total += parseInt(product.price);\r\n    });\r\n\r\n    totalSection.innerText = currencyFormat(total);\r\n}\r\n\r\nasync function removeProduct(productId) {\r\n    const newCart = cart.filter((product) => product.id !== productId);\r\n\r\n    cart = newCart;\r\n\r\n    if (userLogged) {\r\n        await createFirebaseCart(db, userLogged.uid, newCart);\r\n    }\r\n\r\n    addProductToCart(newCart);\r\n\r\n    cartSection.innerHTML = \"\";\r\n\r\n    loadCart(newCart);\r\n}\r\n\r\nfunction renderProduct(product) {\r\n    const productCart = document.createElement(\"div\");\r\n    productCart.className = \"card__product\";\r\n    productCart.innerHTML = `\r\n    <div class=\"card__product__info\">\r\n        <img class=\"card__product__info__img\" src=\"${product.images[0]}\" />\r\n        <p class=\"card__product__info__text\">${product.description}</p>\r\n    </div>\r\n    <div class=\"card__product__quantity\">\r\n        <p>1</p>\r\n        </div>\r\n        <div class=\"card__product__price\">\r\n        <p>${product.price}</p>\r\n    </div>\r\n    <div class=\"card__product__erase\">\r\n        <img src=\"https://firebasestorage.googleapis.com/v0/b/marvelclothing-248ba.appspot.com/o/Banner%2FtrashCan.svg?alt=media&token=4909bb66-8560-41ad-ac12-b77cf7875820\" alt=\"trashCan.svg\">\r\n    </div>\r\n    `;\r\n\r\n    cartSection.appendChild(productCart);\r\n\r\n    productCart.addEventListener(\"click\", (e) => {\r\n        if (e.target.tagName === \"BUTTON\") {\r\n            console.log(\"remove it!\");\r\n            removeProduct(product.id);\r\n        }\r\n    });\r\n}\r\n\r\nonAuthStateChanged(auth, async (user) => {\r\n    if (user) {\r\n        // User is signed in, see docs for a list of available properties\r\n        // https://firebase.google.com/docs/reference/js/firebase.User\r\n        userLogged = user;\r\n        cart = await getFirebaseCart(db, userLogged.uid);\r\n    } else {\r\n        cart = getMyLocalCart();\r\n        // User is signed out\r\n        // ...\r\n    }\r\n\r\n    loadCart(cart);\r\n});\r\n"],"names":["$6QD2Y","parcelRequire","$2d68e6c44e099217$var$cartSection","document","querySelector","$2d68e6c44e099217$var$totalSection","getElementById","$2d68e6c44e099217$var$cart","$2d68e6c44e099217$var$loadCart","cart","total","innerHTML","forEach","product","productCart","createElement","className","images","description","price","appendChild","addEventListener","e","target","tagName","async","productId","newCart","filter","id","userLogged","$hAAYD","createFirebaseCart","db","uid","$LMLC2","addProductToCart","$2d68e6c44e099217$var$renderProduct","parseInt","innerText","currencyFormat"],"version":3,"file":"shoppingCart.a0c0e62d.js.map"}